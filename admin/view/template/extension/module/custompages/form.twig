{{ header }}
{{ column_left }}

<div id="content" class="isl-module-content">

  <div class="page-header">
    <div class="container-fluid">
      <h1>{{ heading_title }}</h1>

      <ul class="breadcrumb">
        {% for breadcrumb in breadcrumbs %}
          <li><a href="{{ breadcrumb['href'] }}">{{ breadcrumb['text'] }}</a></li>
        {% endfor %}
      </ul>

      <div class="pull-right">
        <button onclick="$('#form-isl-{{ module.name }}').submit();" type="submit" class="save-changes btn btn-primary" data-toggle="tooltip" title="{{ button_save }}"><i class="fa fa-save"></i></button>
        <a href="{{ module.url_module }}" class="btn btn-default" data-toggle="tooltip" title="{{ button_cancel }}"><i class="fa fa-reply"></i></a>
      </div>
    </div>
  </div>

  <div class="container-fluid">
    {% if warning %}
      <div class="alert alert-danger">
        <i class="fa fa-exclamation-circle" style="margin-right:10px"></i>{{ warning }}
      </div>
    {% endif %}
    {% if success %}
      <div class="alert alert-success autoSlideUp">
        <button type="button" class="close" data-dismiss="alert">&times;</button>
        <i class="fa fa-check-circle" style="margin-right:10px"></i>{{ success }}
      </div>
      <script>$('.autoSlideUp').delay(4000).fadeOut(600, function(){ $(this).show().css({'visibility':'hidden'}); }).slideUp(600);</script>
    {% endif %}


    <div class="page-content">
      <div class="panel panel-default panel-body">
        <form action="{{ module.url_module_form }}" method="post" enctype="multipart/form-data" id="form-isl-{{ module.name }}" class="form-horizontal">

          <h3 id="_settings" class="isl-form-legend">{{ text_layout }}</h3>
          <hr class="isl-hr">
          
          <div class="row">
            <div class="col-md-9">
              <div class="form-group">
                <label class="col-sm-3 control-label" for="entry-layout-name">{{ entry_layout_name }}</label>
                <div class="col-sm-9">
                  <select id="entry-layout-name" name="{{ module.code }}_item[layout_id]" class="form-control isl-w-250">
                    <option value="0" {{ module.page.layout_id == 0 ? 'selected="selected"' }}>{{ text_select }}</option>
                    {% for layout in layouts %}
                      <option value="{{ layout.layout_id }}" {{ module.page.layout_id == layout.layout_id ? 'selected="selected"' }} data-layout='{{ layout|json_encode() }}'>{{ layout.name }}</option>
                    {% endfor %}
                  </select>

                  <div class="entry-layout-info well" style="display:none;"></div>
                </div>
              </div>
            </div>

            <div class="col-md-3">
              <div class="panel panel-default">
                <div class="panel-heading">{{ text_information }}</div>
                <div class="panel-body">
                  <ul class="isl-list">
                    {% for info in text_info_form_layout %}
                      <li>{{ info }}</li>
                    {% endfor %}
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <h3 id="_settings" class="isl-form-legend">{{ text_settings }}</h3>
          <hr class="isl-hr">

          <div class="row">
            <div class="col-md-9">
              <div class="form-group">
                <label class="col-sm-3 control-label" for="entry-status">{{ entry_status }}</label>
                <div class="col-sm-9">
                  <select id="entry-status" name="{{ module.code }}_item[status]" class="form-control isl-w-200">
                    <option value="0" {{ module.page.status != '1' ? 'selected="selected"' }}>{{ text_disabled }}</option>
                    <option value="1" {{ module.page.status == '1' ? 'selected="selected"' }}>{{ text_enabled }}</option>
                  </select>
                </div>
              </div>

              <div class="form-group">
                <label class="col-sm-3 control-label" for="entry-page-title">{{ entry_page_header }}</label>
                <div class="col-sm-9">
                  {% for lang in languages %}
                    <div class="input-group" style="margin-bottom:5px;">
                      <div class="input-group-addon"><img src="{{ lang['flag_url'] }}" title="{{ lang['name'] }}"></div>
                      <input type="text" id="entry-page-title" name="{{ module.code }}_item[title][{{ lang['language_id'] }}]" value="{{ module.page.title[lang['language_id']] ? module.page.title[lang['language_id']] }}" placeholder="Page heading title" class="form-control" >
                    </div>
                  {% endfor %}
                </div>
              </div>

              <div class="form-group">
                <label class="col-sm-3 control-label">{{ entry_seo_options }}</label>
                <div class="col-sm-9">
                  <ul class="nav nav-tabs langTabs isl-mb-15" role="tablist">
                    {% for language in languages %}
                      <li>
                        <a href="#lang-{{ language['language_id'] }}" role="tab" data-toggle="tab">
                          <img src="{{ language['flag_url'] }}" title="{{ language['name'] }}">
                        </a>
                      </li>
                    {% endfor %}
                  </ul>
                  <div class="tab-content">
                    {% for language in languages %}
                      <div class="tab-pane" id="lang-{{ language['language_id'] }}">
                        <div>
                          <p>{{ entry_meta_title }}</p>
                          <input name="{{ module.code }}_item[meta_title][{{ language['language_id'] }}]" class="form-control" type="text" value="{{ module.page.meta_title[language['language_id']] ? module['page']['meta_title'][language['language_id']] }}" >
                        </div>
                        <div class="isl-mt-15">
                          <p>{{ entry_meta_desc }}</p>
                          <textarea name="{{ module.code }}_item[meta_description][{{ language['language_id'] }}]" class="form-control" rows="4">{{ module.page.meta_description[language['language_id']] ? module.page.meta_description[language['language_id']] }}</textarea>
                        </div>
                        <div class="isl-mt-15">
                          <p>{{ entry_meta_keywords }}</p>
                          <input name="{{ module.code }}_item[meta_keyword][{{ language['language_id'] }}]" class="form-control" type="text" value="{{ module.page.meta_keyword[language['language_id']] ? module.page.meta_keyword[language['language_id']] }}" >
                        </div>
                      </div>
                    {% endfor %}
                  </div>
                </div>
              </div>
            </div>

            <div class="col-md-3">
              <div class="panel panel-default panel-body">
                <ul class="isl-list">
                  {% for info in text_info_form_setting %}
                    <li>{{ info }}</li>
                  {% endfor %}
                </ul>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-9">
              <div class="form-group">
                <label class="col-sm-3 control-label">{{ entry_custom_code }}</label>
                <div class="col-sm-9">
                  <textarea name="{{ module.code }}_item[custom_code]" class="form-control" rows="20" placeholder="<style>
</style>
<script>
</script>">{{ module.page.custom_code }}</textarea>
                </div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="panel panel-default panel-body">
                <ul class="isl-list">
                  {% for info in text_info_form_custom_code %}
                    <li>{{ info }}</li>
                  {% endfor %}
                </ul>
              </div>
            </div>
          </div>

        </form>
      </div>
    </div> <!-- /.page-content -->

  </div>

<script>
$(document).ready(function()
{
  $('#entry-layout-name').on('change', function(){
    let layout = $(this).find(':selected').data('layout'),
        html = '';

    if (layout) {
      html += '<p>{{ text_layout_id }} #' + layout.layout_id + ' - ' + layout.name + ' : <a href="' + layout.url + '" target="_blank">{{ text_edit}}</a></p>';
      html += '<table class="table" style="margin:0;">';
      html += '<thead><tr><th style="width:80px;">{{ text_store_id }}</th><th>{{ text_route }}</th></tr></thead>';
      html += '<tbody>';
      $.each(layout.routes, function(index, value) {
        html += '<tr><td>' + value.store_id + '</td><td>' + value.route + '</td></tr>';
      });
      html += '</tbody>';
      html += '</table>';

      $('.entry-layout-info').show();
    } else {
      $('.entry-layout-info').hide();
    }

    $('.entry-layout-info').html(html);
  });
  $('#entry-layout-name').trigger('change');

});
</script>
</div> <!-- /.isl-module-content -->

{{ footer }}
